# Week 2: Tasks

## Overview

This homework reinforces concepts from Week 2:
- Loading and processing external test data (CSV & YAML)
- Using DataProviders effectively
- Working with Lombok POJOs
- Organizing tests with testng.xml
- Test grouping and filtering


---

## Task 1: Understand the Project Structure

**What you need to do:**
1. Navigate to `src/test/resources/` directory
2. Verify that the following files exist:
   - `people.csv`
   - `people.yaml`
3. Review the data format in both files
4. Open `testng.xml` and understand the test suites

**Expected Outcome:**
- Familiarity with the data structure
- Understanding of how external files are organized

---

## Task 2: Understand Lombok Implementation

**What you need to do:**
1. Examine the `Person` class in `src/main/java/org/example/models/Person.java`
2. Identify all Lombok annotations used:
   - `@Data`
   - `@NoArgsConstructor`
   - `@AllArgsConstructor`
   - `@Builder`
3. Note what methods are auto-generated by each annotation
4. Try creating a Person object using three methods:
   - Empty constructor: `new Person()`
   - Full constructor: `new Person("John", 30, "john@example.com")`
   - Builder: `Person.builder().name("John").age(30).email("john@example.com").build()`

**Expected Outcome:**
- Ability to create Person objects using different approaches
- Understanding of Lombok's role in reducing boilerplate code

**Bonus:**
- Try removing `@Data` and notice what methods disappear from IDE autocomplete
- Review generated code in IDE

---

## Task 3: Data Processing Logic

**What you need to do:**
1. Open the test class: `src/test/java/lesson02/PeopleTests.java`
2. Implement the following private static methods in the test class (or in a helper class):

### 3a. Calculate Average Age
```java
private static double calculateAverageAge(List<Person> people) {
    // TODO: Calculate and return average age
    // Hint: sum all ages and divide by count
}
```

**Expected:**
- Input: List of Person objects
- Output: Double representing average age
- Example: [30, 25, 45, 28] â†’ 32.0

### 3b. Find Oldest Person
```java
private static Person findOldestPerson(List<Person> people) {
    // TODO: Find and return person with highest age
    // Hint: Use streams or simple comparison
}
```

**Expected:**
- Input: List of Person objects
- Output: Person object with maximum age
- Handle edge cases (empty list)

### 3c. Find Youngest Person
```java
private static Person findYoungestPerson(List<Person> people) {
    // TODO: Find and return person with lowest age
    // Hint: Use streams or simple comparison
}
```

**Expected:**
- Input: List of Person objects
- Output: Person object with minimum age
- Handle edge cases (empty list)

---

## Task 4: Implement DataProviders

**What you need to do:**
1. Open `src/test/java/lesson02/PeopleTests.java`
2. Implement the following DataProviders:

### 4a. CSV DataProvider
```java
@DataProvider(name = "peopleFromCSV")
public Object[][] getPeopleFromCSV() throws IOException {
    // TODO: Read people.csv and return as Object[][]
    // Use CSVReader.readPersonsFromCSV()
}
```

**Expected:**
- Reads `src/test/resources/lesson02/people.csv`
- Returns Object[][] where each row is [Person]
- Rows: 4 (Robert, Jimmy, John, John)

### 4b. YAML DataProvider
```java
@DataProvider(name = "peopleFromYAML")
public Object[][] getPeopleFromYAML() throws IOException {
    // TODO: Read people.yaml and return as Object[][]
    // Use YAMLReader.readPersonsFromYAML()
}
```

**Expected:**
- Reads `src/test/resources/lesson02/people.yaml`
- Returns Object[][] where each row is [Person]
- Rows: 4 (Robert, Jimmy, John, John)

### 4c. Combined DataProvider
```java
@DataProvider(name = "combinedPeople")
public Object[][] getCombinedPeopleData() throws IOException {
    // TODO: Combine CSV + YAML data
    // Use both readers and merge results
}
```

**Expected:**
- Combines data from both sources
- Returns Object[][] with 8 rows total
- Can be used for testing aggregated statistics

---

## Task 5: Implement Test Methods

**What you need to do:**
Implement the following test methods in `src/test/java/lesson02/PeopleTests.java`:

### 5a. Test Individual CSV Records
```java
@Test(dataProvider = "peopleFromCSV", groups = "smoke")
public void testCSVPersonData(Person person) {
    // TODO: Validate person object from CSV
    // Assert that name, age, and email are not null/empty
    // Assert that age is positive
    System.out.println("CSV Person: " + person);
}
```

### 5b. Test Individual YAML Records
```java
@Test(dataProvider = "peopleFromYAML", groups = "smoke")
public void testYAMLPersonData(Person person) {
    // TODO: Validate person object from YAML
    // Assert that name, age, and email are not null/empty
    // Assert that age is positive
    System.out.println("YAML Person: " + person);
}
```

### 5c. Test Average Age Calculation
```java
@Test(groups = "regression")
public void testAverageAgeCalculation() throws IOException {
    // TODO: Load combined data and calculate average age
    List<Person> people = new ArrayList<>();
    people.addAll(CSVReader.readPersonsFromCSV("src/test/resources/lesson02/people.csv"));
    people.addAll(YAMLReader.readPersonsFromYAML("src/test/resources/lesson02/people.yaml"));
    
    double averageAge = calculateAverageAge(people);
    
    // Assert average age is reasonable (between 20 and 50, for example)
    Assert.assertTrue(averageAge > 0, "Average age should be positive");
    Assert.assertTrue(averageAge < 100, "Average age should be less than 100");
    System.out.println("Average age: " + averageAge);
}
```

### 5d. Test Oldest Person
```java
@Test(groups = "regression")
public void testFindOldestPerson() throws IOException {
    // TODO: Load combined data and find oldest person
    List<Person> people = new ArrayList<>();
    people.addAll(CSVReader.readPersonsFromCSV("src/test/resources/lesson02/people.csv"));
    people.addAll(YAMLReader.readPersonsFromYAML("src/test/resources/lesson02/people.yaml"));
    
    Person oldest = findOldestPerson(people);
    
    Assert.assertNotNull(oldest, "Oldest person should not be null");
    Assert.assertTrue(oldest.getAge() > 0, "Age should be positive");
    System.out.println("Oldest person: " + oldest.getName() + ", Age: " + oldest.getAge());
}
```

### 5e. Test Youngest Person
```java
@Test(groups = "regression")
public void testFindYoungestPerson() throws IOException {
    // TODO: Load combined data and find youngest person
    List<Person> people = new ArrayList<>();
    people.addAll(CSVReader.readPersonsFromCSV("src/test/resources/lesson02/people.csv"));
    people.addAll(YAMLReader.readPersonsFromYAML("src/test/resources/lesson02/people.yaml"));
    
    Person youngest = findYoungestPerson(people);
    
    Assert.assertNotNull(youngest, "Youngest person should not be null");
    Assert.assertTrue(youngest.getAge() > 0, "Age should be positive");
    System.out.println("Youngest person: " + youngest.getName() + ", Age: " + youngest.getAge());
}
```

---

## Task 6: Verify testng.xml Configuration

**What you need to do:**
1. Review `testng.xml` in the project root
2. Verify the following suites are configured:
   - **Smoke Suite**: Runs only tests with `groups = "smoke"`
   - **Regression Suite**: Runs only tests with `groups = "regression"`
   - **Full Suite**: Runs all tests (smoke + regression)

3. Run each suite using Maven:
```bash
# Smoke suite
mvn test -DsuiteXmlFile=testng.xml -Dgroups=smoke

# Regression suite
mvn test -DsuiteXmlFile=testng.xml -Dgroups=regression

# Full suite
mvn test -DsuiteXmlFile=testng.xml
```

**Expected Output:**
- Smoke: 2 tests pass (CSV and YAML validation)
- Regression: 3 tests pass (average age, oldest, youngest)
- Full: 5 tests pass (all combined)

---

## Bonus Challenges

### Challenge 1: Sorting
Add a test that sorts all people by age (ascending and descending) and verify the first/last person.

### Challenge 2: Filtering
Add a test that filters people older than 30 and verifies the count is correct.

### Challenge 3: Multiple Files
Add a third data source (e.g., JSON) and create another DataProvider that combines all three sources.

### Challenge 4: Parallel Execution
Modify testng.xml to run tests in parallel and verify they still pass:
```xml
<suite name="Parallel Suite" parallel="methods" thread-count="2">
```

